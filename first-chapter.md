# Istio 服务网格实战教科书 - 第一章课件

## 第一章：服务网格的崛起与 Istio 架构 (基础篇)

### 学习目标
- 建立对 Istio 的全貌认知，理解服务网格的由来和核心架构；
- 熟悉服务网格如何解决微服务架构中的痛点；
- 掌握 Istio 的基本安装及验证方法。

### 1. 服务网格背景及微服务架构的“成长的烦恼”

#### 微服务架构中的挑战：
- **服务通信复杂性**：随着微服务数量的增长，服务之间的网络通信变得越发复杂。
    - 示例案例：某公司微服务网络面临难以追踪的服务依赖问题。
- **分布式故障传播**：
    - 服务调用的链路长，某个微服务失败可能导致整个应用失效。
- **流量控制与负载平衡的灵活性不足**。

#### 服务网格的价值：
- **流量管理**：支持服务发现、流量路由、负载均衡等功能。
- **安全保障**：通过 mTLS 统一保障服务通信加密和认证。
- **可观测性**：提供分布式跟踪、日志与度量分析功能。

### 2. Istio 架构演进

#### 核心组件
- **数据平面：Envoy Sidecar代理**。
    - 功能：拦截服务请求并负责路由处理、可以做 TLS 加解密、负载均衡。
    - 通信协议：xDS API交互。
- **控制平面：Istiod**。
    - 主要功能：核心管理器，分发配置到数据平面的 Envoy。

#### Istio架构演进阶段
- *1.x（早期）：*
    - 数据与控制平面松耦合设计，逐步支持多元场景。
- *自 1.26*: 引入Ambient Mesh（静态模式）新架构。
    - **特点**：
        1. 轻量级且部署便捷，适应更多用例。
        2. 采用 Sidecarless 技术降低大规模集群复杂度。

### 3. 实战课题：搭建 Istio 环境

#### 实验目的
- 使用 istioctl 获取环境、模拟安装到工作群组。
- 探索 CRD 背后资源分配的关系图总结多平台兼容边界。

#### 实验步骤
1. 使用命令行 `istioctl install --set profile=demo`。
2. 安装完成后，检查 pod 的运行状态：
   ```bash
   kubectl get pods -n istio-system
   ```
3. 确认生成的网关和 VirtualService 正确配置，逐步完善:`istio debug-grid-caseEstimate40%.headers*Header-contectual Visuals]-standards.