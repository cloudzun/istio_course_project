# ç¬¬å››ç« ï¼šå¼¹æ€§ä¸éŸ§æ€§ â€”â€” æ„å»ºå®¹é”™çš„å¾®æœåŠ¡ç³»ç»Ÿ

> **ç« èŠ‚ç›®æ ‡**ï¼šæ·±å…¥ç†è§£è¶…æ—¶ã€é‡è¯•ã€ç†”æ–­ã€é™æµç­‰å®¹é”™æœºåˆ¶çš„å·¥ä½œåŸç†ï¼ŒæŒæ¡å¦‚ä½•è®¾è®¡ä¸€ä¸ªèƒ½å¤Ÿè‡ªæ„ˆçš„å¾®æœåŠ¡ç³»ç»Ÿã€‚

---

## 1. åˆ†å¸ƒå¼ç³»ç»Ÿçš„"é»‘å¤©é¹…"äº‹ä»¶

### ä¸ºä»€ä¹ˆå¾®æœåŠ¡ç‰¹åˆ«å®¹æ˜“å‡ºæ•…éšœï¼Ÿ

Kubernetes é›†ç¾¤è¿è¡Œç€æ•°åç”šè‡³æ•°ç™¾ä¸ª Podã€‚è¿™äº› Pod é¢ä¸´å„ç§å‹åŠ›ï¼š

```
ç½‘ç»œæŠ–åŠ¨
   â†“
Pod 1 å‘é€è¯·æ±‚åˆ° Pod 2
   â†“
ç½‘ç»œä¸¢åŒ…ï¼Œé‡ä¼ å»¶è¿Ÿ
   â†“
Pod 2 å“åº”æ…¢ï¼ˆå¯èƒ½è¿˜æ˜¯åœ¨å¤„ç†ä¸­ï¼‰
   â†“
Pod 1 ç­‰å¾…è¶…æ—¶ï¼Œå…³é—­è¿æ¥
   â†“
Pod 2 çªç„¶è¢«ä¸­æ–­ï¼Œå¯èƒ½ç•™ä¸‹ä¸å®Œæ•´çš„äº‹åŠ¡
   â†“
ç³»ç»ŸçŠ¶æ€ä¸ä¸€è‡´ï¼Œçº§è”æ•…éšœå¼€å§‹...
```

**åœ¨å•ä½“åº”ç”¨ä¸­ï¼š** æ•…éšœè¢«éš”ç¦»åœ¨ä¸€ä¸ªè¿›ç¨‹å†…ã€‚

**åœ¨å¾®æœåŠ¡ä¸­ï¼š** æ•…éšœä¼šæ²¿ç€è°ƒç”¨é“¾**çˆ†ç‚¸å¼ä¼ æ’­**ã€‚

```
å®¢æˆ·ç«¯è¯·æ±‚
   â†“
API ç½‘å…³è¶…æ—¶ï¼Œæ‹’ç»è¯·æ±‚
   â†“
æ•°æ®åº“è¿æ¥æ± è€—å°½
   â†“
å…¶ä»–æœåŠ¡è¿æ¥è¶…æ—¶
   â†“
é›ªå´©æ•ˆåº”ï¼šæ•´ä¸ªç³»ç»Ÿå´©æºƒ
```

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Istio è¦å†…ç½®è¶…æ—¶ã€é‡è¯•ã€ç†”æ–­ç­‰å®¹é”™æœºåˆ¶ã€‚

### å®¹é”™çš„å››å¤§æ”¯æŸ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å®¹é”™ç³»ç»Ÿæ¶æ„                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  1. è¶…æ—¶ï¼ˆTimeoutï¼‰                              â”‚
â”‚     â”œâ”€ ä½œç”¨ï¼šå¿«é€Ÿæ£€æµ‹æ•…éšœ                         â”‚
â”‚     â””â”€ åŸç†ï¼šè¯·æ±‚å¦‚æœ Ns åè¿˜æœªå®Œæˆï¼Œç›´æ¥æ”¾å¼ƒ    â”‚
â”‚                                                  â”‚
â”‚  2. é‡è¯•ï¼ˆRetryï¼‰                                â”‚
â”‚     â”œâ”€ ä½œç”¨ï¼šå…‹æœç¬æ—¶ç½‘ç»œæ•…éšœ                     â”‚
â”‚     â””â”€ åŸç†ï¼šå¤±è´¥åè‡ªåŠ¨é‡æ–°å°è¯•ï¼ˆæœ‰ä¸Šé™ï¼‰        â”‚
â”‚                                                  â”‚
â”‚  3. ç†”æ–­ï¼ˆCircuit Breakerï¼‰                      â”‚
â”‚     â”œâ”€ ä½œç”¨ï¼šé˜²æ­¢æ•…éšœæ‰©æ•£                         â”‚
â”‚     â””â”€ åŸç†ï¼šæ£€æµ‹æ•…éšœåï¼Œæš‚æ—¶æ‹’ç»æ–°è¯·æ±‚          â”‚
â”‚                                                  â”‚
â”‚  4. é™æµï¼ˆRate Limitingï¼‰                        â”‚
â”‚     â”œâ”€ ä½œç”¨ï¼šä¿æŠ¤åç«¯ä¸è¢«æ·¹æ²¡                     â”‚
â”‚     â””â”€ åŸç†ï¼šè¶…è¿‡é˜ˆå€¼çš„è¯·æ±‚ç›´æ¥æ‹’ç»              â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. è¶…æ—¶ï¼ˆTimeoutï¼‰ï¼šå¿«é€Ÿå¤±è´¥çš„è‰ºæœ¯

### è¶…æ—¶çš„æœ¬è´¨

**è¶…æ—¶** = "å¦‚æœ N ç§’å†…æ²¡æœ‰å“åº”ï¼Œæˆ‘ä¸å†ç­‰äº†"ã€‚

```
æ—¶é—´è½´ï¼š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0s    å‘é€è¯·æ±‚ â†’ å¼€å§‹è®¡æ—¶
      â†“
2s    Envoy ç­‰å¾…
      â†“
5s    è®¾å®šçš„è¶…æ—¶æ—¶é—´åˆ°è¾¾ï¼
      â†“
5s+   Envoy ä¸å†ç­‰å¾…ï¼Œç«‹å³è¿”å› 504 Gateway Timeout
      â†“
åç»­æœåŠ¡å™¨çš„å“åº”ï¼ˆå¯èƒ½åœ¨ 6s åˆ°è¾¾ï¼‰è¢«å¿½ç•¥
```

### è¶…æ—¶çš„ä½œç”¨ä¸é£é™©

**ä½œç”¨ï¼š** å¿«é€Ÿæ£€æµ‹æ•…éšœï¼Œé‡Šæ”¾è¢«å ç”¨çš„èµ„æº

```yaml
# ç¤ºä¾‹ï¼šè®¾ç½® 10 ç§’è¶…æ—¶
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: details
spec:
  hosts:
  - details
  http:
  - route:
    - destination:
        host: details
    timeout: 10s              # 10 ç§’è¶…æ—¶
```

**é£é™©åœºæ™¯ 1ï¼šè¶…æ—¶æ—¶é—´è®¾ç½®å¤ªçŸ­**

```
åœºæ™¯ï¼šæ­£å¸¸æ“ä½œéœ€è¦ 8 ç§’ï¼ˆå¦‚å¯¼å‡º 10MB æ–‡ä»¶ï¼‰
      ä½†è¶…æ—¶è®¾ç½®ä¸º 5 ç§’
      â†“
ç»“æœï¼šæ‰€æœ‰è¯·æ±‚éƒ½è¶…æ—¶å¤±è´¥ï¼Œè™½ç„¶åç«¯å®é™…å·¥ä½œæ­£å¸¸ï¼
```

**é£é™©åœºæ™¯ 2ï¼šè¶…æ—¶æ—¶é—´è®¾ç½®å¤ªé•¿**

```
åœºæ™¯ï¼šåç«¯æ•…éšœï¼Œä½†è¶…æ—¶è®¾ç½®ä¸º 60 ç§’
      â†“
ç»“æœï¼šå®¢æˆ·ç«¯ç­‰å¾… 60 ç§’ï¼Œè¿æ¥å ç”¨èµ„æºæµªè´¹
      çº§è”æ•…éšœæ‰©æ•£ï¼ˆå…¶ä»–ç­‰å¾…çš„è¯·æ±‚å †ç§¯ï¼‰
```

### è¶…æ—¶é“¾å¼ä¼ æ’­ä¸é…ç½®å»ºè®®

è¶…æ—¶ä¼šä»å¤–åˆ°å†…é€å±‚ä¼ æ’­ï¼š

```
å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰
   â””â”€ è¶…æ—¶ï¼š30s
   
   API Gatewayï¼ˆEnvoyï¼‰
      â””â”€ è¶…æ—¶ï¼š28sï¼ˆæ¯”ä¸Šæ¸¸å°‘ 2sï¼‰
      
      productpage æœåŠ¡ï¼ˆEnvoy Sidecarï¼‰
         â””â”€ è¶…æ—¶ï¼š25sï¼ˆæ¯”ä¸Šæ¸¸å°‘ 3sï¼‰
         
         details æœåŠ¡ï¼ˆEnvoy Sidecarï¼‰
            â””â”€ è¶…æ—¶ï¼š22sï¼ˆæ¯”ä¸Šæ¸¸å°‘ 3sï¼‰
```

**ä¸ºä»€ä¹ˆåˆ†å±‚é€’å‡ï¼Ÿ**

å¦‚æœæ‰€æœ‰å±‚çš„è¶…æ—¶éƒ½æ˜¯ 30sï¼Œé‚£ä¹ˆæœ€å†…å±‚æ•…éšœæ—¶ï¼Œå¤–å±‚ä»è¦ç­‰ 30s æ‰çŸ¥é“ç»“æœã€‚åˆ†å±‚é€’å‡å¯ä»¥è®©å¤–å±‚æ›´å¿«æ„ŸçŸ¥å†…å±‚æ•…éšœã€‚

**é…ç½®å»ºè®®ï¼š**

```yaml
# è§„åˆ™ï¼šæ¯å±‚é€’å‡ 1-2 ç§’
# æœ€å¤–å±‚ï¼ˆGatewayï¼‰= 30s
# å†…å±‚ = 28s, 26s, 24s...

# ç¤ºä¾‹ï¼šproductpage è°ƒç”¨ details
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: productpage
spec:
  hosts:
  - productpage
  http:
  - route:
    - destination:
        host: details
    timeout: 28s              # æ¯” Gateway çš„ 30s å°‘ 2s

---
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: details
spec:
  hosts:
  - details
  http:
  - route:
    - destination:
        host: database
    timeout: 26s              # ç»§ç»­é€’å‡
```

### é’ˆå¯¹ä¸åŒæ“ä½œçš„è¶…æ—¶å»ºè®®

| æ“ä½œç±»å‹ | å»ºè®®è¶…æ—¶ | ç†ç”± |
|---------|--------|------|
| **API æŸ¥è¯¢** | 3-5s | åº”è¯¥å¾ˆå¿«å“åº” |
| **æ–‡ä»¶ä¸Šä¼ ** | 30-60s | I/O æ“ä½œè¾ƒæ…¢ |
| **æŠ¥è¡¨å¯¼å‡º** | 120s+ | æ•°æ®å¤„ç†éœ€è¦æ—¶é—´ |
| **æ•°æ®åŒæ­¥** | 10-30s | ç½‘ç»œ I/O å—é™ |
| **å¥åº·æ£€æŸ¥** | 2s | åº”è¯¥ç«‹åˆ»å“åº” |

---

## 3. é‡è¯•ï¼ˆRetryï¼‰ï¼šä»ç¬æ—¶æ•…éšœä¸­æ¢å¤

### é‡è¯•çš„å·¥ä½œåŸç†

å½“è¯·æ±‚å¤±è´¥æ—¶ï¼ŒEnvoy **è‡ªåŠ¨é‡æ–°å‘é€**ç›¸åŒçš„è¯·æ±‚åˆ°åŒä¸€æœåŠ¡æˆ–å…¶ä»–å‰¯æœ¬ã€‚

```
ç¬¬ä¸€æ¬¡å°è¯•ï¼š
è¯·æ±‚ â†’ details Pod-1
   â†“
ç½‘ç»œæŠ–åŠ¨ï¼Œè¿æ¥è¶…æ—¶
   â†“
âœ— å¤±è´¥

ç¬¬äºŒæ¬¡å°è¯•ï¼ˆè‡ªåŠ¨é‡è¯•ï¼‰ï¼š
è¯·æ±‚ â†’ details Pod-2ï¼ˆä¸åŒå‰¯æœ¬ï¼‰
   â†“
æˆåŠŸ
   â†“
âœ“ è¿”å›å“åº”
```

### é‡è¯•çš„é…ç½®

```yaml
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: reviews
spec:
  hosts:
  - reviews
  http:
  - route:
    - destination:
        host: reviews
    retries:
      attempts: 3                # æœ€å¤šå°è¯• 3 æ¬¡
      perTryTimeout: 2s          # æ¯æ¬¡å°è¯•çš„è¶…æ—¶æ—¶é—´
      retryOn: "5xx,retriable-4xx,reset,connect-failure,retriable-4xx-headers"
```

**å­—æ®µè§£é‡Šï¼š**

| å­—æ®µ | å«ä¹‰ |
|------|------|
| `attempts: 3` | æœ€å¤šå°è¯• 3 æ¬¡ï¼ˆåŒ…æ‹¬é¦–æ¬¡ï¼‰ |
| `perTryTimeout: 2s` | æ¯æ¬¡å°è¯•æœ€å¤šç­‰å¾… 2 ç§’ |
| `retryOn` | è§¦å‘é‡è¯•çš„æ¡ä»¶ |

### retryOn æ¡ä»¶è¯¦è§£

```yaml
retryOn: "5xx,retriable-4xx,reset,connect-failure"
```

**å¯é‡è¯•çš„æ¡ä»¶ï¼š**

| æ¡ä»¶ | å«ä¹‰ | ä¾‹å­ |
|------|------|------|
| `5xx` | æ‰€æœ‰ 5xx é”™è¯¯ | 500, 502, 503, 504 |
| `retriable-4xx` | æŸäº› 4xx é”™è¯¯ | 409 (Conflict), 429 (Too Many Requests) |
| `reset` | è¿æ¥è¢«é‡ç½® | TCP RST |
| `connect-failure` | è¿æ¥å¤±è´¥ | æ— æ³•å»ºç«‹ TCP è¿æ¥ |
| `retriable-status-codes` | ç‰¹å®šçŠ¶æ€ç  | ä¸ retriable-4xx ç±»ä¼¼ |
| `refused-stream` | HTTP/2 stream è¢«æ‹’ | è¿æ¥æ± æ»¡ |
| `cancelled` | è¯·æ±‚è¢«å–æ¶ˆ | å®¢æˆ·ç«¯ä¸»åŠ¨ä¸­æ–­ |

**ä¸å¯é‡è¯•çš„æ¡ä»¶ï¼ˆåº”è¯¥é¿å…ï¼‰ï¼š**

```yaml
# âŒ é”™è¯¯ï¼šä¸åº”è¯¥é‡è¯• POSTï¼ˆå¯èƒ½äº§ç”Ÿå‰¯ä½œç”¨ï¼‰
retryOn: "5xx"

# âœ“ æ­£ç¡®ï¼šåªé‡è¯•å¹‚ç­‰æ“ä½œï¼ˆGETã€HEADã€PUT ç­‰ï¼‰
# POST é»˜è®¤ä¸é‡è¯•ï¼ˆå¯èƒ½å¯¼è‡´é‡å¤æ“ä½œï¼‰
```

### é‡è¯•çš„é™·é˜±ä¸æœ€ä½³å®è·µ

**é™·é˜± 1ï¼šé‡è¯•æ¬¡æ•°è¿‡å¤šå¯¼è‡´æ”¾å¤§æ•…éšœ**

```
åœºæ™¯ï¼šåç«¯æœåŠ¡æ•…éšœï¼ˆæ— æ³•æ¢å¤ï¼‰ï¼Œè®¾ç½® attempts: 10
      â†“
ç»“æœï¼šå®¢æˆ·ç«¯é‡è¯• 10 æ¬¡
      â†“
åç«¯æ”¶åˆ° 10 å€çš„è¯·æ±‚é‡
      â†“
æ•…éšœæ›´ä¸¥é‡ï¼
```

**æœ€ä½³å®è·µï¼š** é‡è¯•æ¬¡æ•°è®¾ç½®ä¸º 2-3 æ¬¡

```yaml
retries:
  attempts: 3              # è¶³ä»¥å…‹æœç½‘ç»œæŠ–åŠ¨ï¼Œä½†ä¸ä¼šæ”¾å¤§æ•…éšœ
  perTryTimeout: 2s
```

**é™·é˜± 2ï¼šperTryTimeout æœªè®¾ç½®ï¼Œå¯¼è‡´æ€»è¶…æ—¶æ—¶é—´è¿‡é•¿**

```
åœºæ™¯ï¼š
  timeout: 10s
  retries:
    attempts: 3
    perTryTimeout: æœªè®¾ç½®ï¼ˆé»˜è®¤æ— é™ï¼‰
  â†“
ç»“æœï¼š
  ç¬¬ 1 æ¬¡å°è¯•ï¼š10s è¶…æ—¶
  ç¬¬ 2 æ¬¡å°è¯•ï¼š10s è¶…æ—¶
  ç¬¬ 3 æ¬¡å°è¯•ï¼š10s è¶…æ—¶
  æ€»è€—æ—¶ï¼šæœ€å¤š 30sï¼
```

**æ­£ç¡®é…ç½®ï¼š**

```yaml
timeout: 10s               # æ€»è¶…æ—¶æ—¶é—´
retries:
  attempts: 3              # 3 æ¬¡å°è¯•
  perTryTimeout: 2s        # æ¯æ¬¡æœ€å¤š 2sï¼ˆ3 æ¬¡ = 6s â‰¤ 10s æ€»è¶…æ—¶ï¼‰
```

### é‡è¯•ä¸æœåŠ¡å¹‚ç­‰æ€§

**å…³é”®åŸåˆ™ï¼š** åªæœ‰**å¹‚ç­‰æ“ä½œ**æ‰èƒ½å®‰å…¨é‡è¯•ã€‚

**å¹‚ç­‰æ“ä½œï¼ˆå¯ä»¥é‡è¯•ï¼‰ï¼š**
- GET, HEAD, PUT, DELETEï¼ˆè¯»æ“ä½œæˆ–å¯é‡å¤æ‰§è¡Œçš„æ“ä½œï¼‰
- æœåŠ¡å™¨èƒ½å¤Ÿæ£€æµ‹é‡å¤æ“ä½œå¹¶è¿”å›ç›¸åŒç»“æœ

**éå¹‚ç­‰æ“ä½œï¼ˆä¸åº”è¯¥é‡è¯•ï¼‰ï¼š**
- POSTï¼ˆåˆ›å»ºæ–°èµ„æºï¼Œé‡è¯•ä¼šäº§ç”Ÿå¤šä¸ªå‰¯æœ¬ï¼‰
- PATCHï¼ˆä¿®æ”¹éƒ¨åˆ†å­—æ®µï¼Œé‡è¯•å¯èƒ½å¯¼è‡´å¤šæ¬¡ä¿®æ”¹ï¼‰

```yaml
# âŒ é”™è¯¯ç¤ºä¾‹ï¼šPOST æ·»åŠ é‡è¯•
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: order-service
spec:
  hosts:
  - order-service
  http:
  - match:
    - method:
        exact: POST
    route:
    - destination:
        host: order-service
    retries:
      attempts: 3             # âŒ å±é™©ï¼é‡è¯•ä¼šäº§ç”Ÿå¤šä¸ªè®¢å•

---
# âœ“ æ­£ç¡®ç¤ºä¾‹ï¼šGET æ·»åŠ é‡è¯•
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: order-service
spec:
  hosts:
  - order-service
  http:
  - match:
    - method:
        exact: GET
    route:
    - destination:
        host: order-service
    retries:
      attempts: 3             # âœ“ å®‰å…¨ï¼ŒGET æ˜¯å¹‚ç­‰çš„
```

---

## 4. ç†”æ–­ï¼ˆCircuit Breakerï¼‰ï¼šä¿æŠ¤ç³»ç»Ÿçš„é˜²ç«å¢™

### ç†”æ–­çš„å·¥ä½œåŸç†

ç†”æ–­å™¨æ˜¯ä¸€ä¸ª**çŠ¶æ€æœº**ï¼Œåœ¨ä¸‰ä¸ªçŠ¶æ€ä¹‹é—´åˆ‡æ¢ï¼š

```
Closedï¼ˆæ­£å¸¸ï¼‰
  â”œâ”€ æµé‡æ­£å¸¸é€šè¿‡
  â”œâ”€ ç›‘æ§é”™è¯¯ç‡
  â””â”€ è‹¥é”™è¯¯è¶…è¿‡é˜ˆå€¼ â†’ è½¬ä¸º Open
  
Openï¼ˆæ•…éšœï¼‰
  â”œâ”€ æ‹’ç»æ‰€æœ‰æ–°è¯·æ±‚ï¼Œç›´æ¥è¿”å› 503
  â”œâ”€ åœæ­¢å‘é€æµé‡åˆ°åç«¯ï¼Œè®©å®ƒæ¢å¤
  â””â”€ ç­‰å¾… baseEjectionTime â†’ è½¬ä¸º Half-Open
  
Half-Openï¼ˆåŠå¼€ï¼Œæ¢æµ‹ä¸­ï¼‰
  â”œâ”€ å…è®¸å°‘é‡æ¢æµ‹æµé‡
  â”œâ”€ è‹¥æ¢æµ‹æˆåŠŸ â†’ è½¬ä¸º Closed
  â””â”€ è‹¥æ¢æµ‹å¤±è´¥ â†’ å›åˆ° Open
```

**æ—¶é—´çº¿ç¤ºä¾‹ï¼š**

```
10:00:00 - æ­£å¸¸è¿è¡Œï¼ˆClosed çŠ¶æ€ï¼‰
           â”œâ”€ Pod-A æ­£å¸¸å¤„ç†è¯·æ±‚
           â””â”€ é”™è¯¯ç‡ï¼š0.1%

10:00:05 - åç«¯åº”ç”¨å‘ç”Ÿæ•…éšœ
           â”œâ”€ Pod-A å¼€å§‹è¿”å› 500 é”™è¯¯
           â”œâ”€ é”™è¯¯ç‡ï¼š80%ï¼ˆè¶…è¿‡é˜ˆå€¼ï¼‰
           â””â”€ è§¦å‘ç†”æ–­ â†’ Open çŠ¶æ€

10:00:05-10:00:35 - ç†”æ–­æœŸé—´ï¼ˆOpen çŠ¶æ€ï¼‰
           â”œâ”€ Envoy æ‹’ç»æ‰€æœ‰æ–°è¯·æ±‚ï¼Œè¿”å› 503
           â”œâ”€ ä¸å†å‘ Pod-A å‘é€æµé‡
           â”œâ”€ Pod-A æœ‰æœºä¼šæ¢å¤ï¼ˆå¯èƒ½é‡å¯ç­‰ï¼‰
           â””â”€ 30 ç§’å â†’ Half-Open çŠ¶æ€

10:00:35 - æ¢æµ‹æœŸï¼ˆHalf-Open çŠ¶æ€ï¼‰
           â”œâ”€ Envoy å‘é€å°‘é‡æ¢æµ‹è¯·æ±‚ç»™ Pod-A
           â”œâ”€ è‹¥æ¢æµ‹æˆåŠŸï¼ˆ200 OKï¼‰â†’ Closed çŠ¶æ€
           â””â”€ è‹¥æ¢æµ‹å¤±è´¥ï¼ˆ500 é”™è¯¯ï¼‰â†’ å›åˆ° Openï¼ˆé‡æ–°è®¡æ—¶ï¼‰
```

### Istio ä¸­çš„ç†”æ–­å®ç°

åœ¨ Istio ä¸­ï¼Œç†”æ–­é€šè¿‡ **DestinationRule çš„ outlierDetection** å®ç°ï¼š

```yaml
apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: reviews
spec:
  host: reviews
  trafficPolicy:
    connectionPool:              # è¿æ¥æ± é™åˆ¶ï¼ˆè§¦å‘å™¨ä¹‹ä¸€ï¼‰
      tcp:
        maxConnections: 100
      http:
        http1MaxPendingRequests: 100
    
    outlierDetection:            # ç†”æ–­é…ç½®
      consecutive5xxErrors: 5    # è¿ç»­ 5 ä¸ª 5xx é”™è¯¯è§¦å‘
      interval: 30s              # æ¯ 30 ç§’æ£€æŸ¥ä¸€æ¬¡
      baseEjectionTime: 30s      # é¦–æ¬¡éš”ç¦» 30 ç§’
      maxEjectionPercent: 100    # å¯ä»¥éš”ç¦»æ‰€æœ‰å®ä¾‹
      minRequestVolume: 5        # è‡³å°‘ 5 ä¸ªè¯·æ±‚æ‰å¼€å§‹æ£€æµ‹
      splitExternalLocalOriginErrors: true
```

**é…ç½®å‚æ•°è¯¦è§£ï¼š**

| å‚æ•° | ä½œç”¨ | é»˜è®¤å€¼ | å»ºè®®å€¼ |
|------|------|--------|--------|
| `consecutive5xxErrors` | å¤šå°‘ä¸ª 5xx é”™è¯¯è§¦å‘éš”ç¦» | 5 | 3-5ï¼ˆæ ¹æ®æœåŠ¡å®¹é”™èƒ½åŠ›ï¼‰ |
| `interval` | å¤šé¢‘ç¹æ£€æŸ¥ä¸€æ¬¡ | 10s | 10-30sï¼ˆè¶ŠçŸ­è¶Šå¿«ååº”ï¼‰ |
| `baseEjectionTime` | é¦–æ¬¡éš”ç¦»å¤šé•¿ | 30s | 30-60sï¼ˆç•™ç»™åç«¯æ¢å¤ï¼‰ |
| `maxEjectionPercent` | æœ€å¤šéš”ç¦»å¤šå°‘ % å®ä¾‹ | 10% | 50%ï¼ˆé˜²æ­¢å®Œå…¨æ•…éšœï¼‰ |

### ç†”æ–­ä¸è¿æ¥æ± çš„åä½œ

ç†”æ–­æœ‰ä¸¤ç§è§¦å‘æ–¹å¼ï¼š

**æ–¹å¼ 1ï¼šé”™è¯¯ç‡è§¦å‘ï¼ˆoutlierDetectionï¼‰**

```
è¿ç»­ 5 ä¸ª 5xx â†’ æ ‡è®°ä¸ºæ•…éšœ â†’ è¿›å…¥éš”ç¦»
```

**æ–¹å¼ 2ï¼šè¿æ¥æ± æ»¡ï¼ˆconnectionPoolï¼‰**

```
å¾…å¤„ç†è¯·æ±‚é˜Ÿåˆ—æ»¡äº† â†’ æ–°è¯·æ±‚æ— æ³•è¿›å…¥ â†’ è¿”å› 503ï¼ˆæœ¬è´¨ä¹Ÿæ˜¯ç†”æ–­ï¼‰
```

**å®Œæ•´çš„å®¹é”™é“¾æ¡ï¼š**

```
å®¢æˆ·ç«¯å‘é€è¯·æ±‚
   â†“
Envoy æ£€æŸ¥è¿æ¥æ± ï¼šæ˜¯å¦è¿˜æœ‰ç©ºä½™ä½ç½®ï¼Ÿ
   â”œâ”€ æ˜¯ â†’ åŠ å…¥é˜Ÿåˆ—ï¼Œç­‰å¾…è½¬å‘
   â””â”€ å¦ â†’ ç«‹å³è¿”å› 503ï¼ˆè¿æ¥æ± æ»¡çš„ç†”æ–­ï¼‰
   
   â†“
è½¬å‘åˆ°åç«¯
   â†“
ç›‘æ§å“åº”ï¼šæ˜¯å¦ 5xxï¼Ÿ
   â”œâ”€ å¦ â†’ æ­£å¸¸è¿”å›
   â””â”€ æ˜¯ â†’ è®¡æ•°å™¨ +1
   
   â†“
è¿ç»­ 5 ä¸ª 5xxï¼Ÿ
   â”œâ”€ å¦ â†’ ç»§ç»­ç›‘æ§
   â””â”€ æ˜¯ â†’ è¿›å…¥ Openï¼ˆé”™è¯¯ç‡ç†”æ–­ï¼‰ï¼Œæš‚åœå‘æµé‡ 30s
```

### ç†”æ–­çš„é…ç½®å»ºè®®

**åœºæ™¯ 1ï¼šå…³é”®æœåŠ¡ï¼ˆä¸èƒ½å®Œå…¨æ•…éšœï¼‰**

```yaml
outlierDetection:
  consecutive5xxErrors: 3        # æ›´æ•æ„Ÿï¼Œæ—©å‘ç°
  interval: 5s                   # é¢‘ç¹æ£€æŸ¥
  baseEjectionTime: 60s          # ç»™æ›´å¤šæ¢å¤æ—¶é—´
  maxEjectionPercent: 50         # æœ€å¤šéš”ç¦» 50%ï¼Œä¿æŒå¯ç”¨æ€§
```

**åœºæ™¯ 2ï¼šéå…³é”®æœåŠ¡ï¼ˆå¯ä»¥è¾ƒæ¿€è¿›ï¼‰**

```yaml
outlierDetection:
  consecutive5xxErrors: 10       # å®½æ¾ï¼Œå…è®¸æŸä¸ªå®ä¾‹å‡ºé—®é¢˜
  interval: 30s                  # æ£€æŸ¥ä¸é¢‘ç¹
  baseEjectionTime: 30s
  maxEjectionPercent: 100        # å¯ä»¥éš”ç¦»æ‰€æœ‰ï¼ˆé‡æ–°å¯åŠ¨ç­‰ï¼‰
```

---

## 5. é™æµï¼ˆRate Limitingï¼‰ï¼šç®¡åˆ¶è¿›å…¥çš„æµé‡

### é™æµçš„å¿…è¦æ€§

æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼š

```
æ­£å¸¸æƒ…å†µï¼ˆ100 req/sï¼‰ï¼š
åç«¯å¤„ç†èƒ½åŠ›ï¼š100 req/s
  â†“
ç³»ç»Ÿæ­£å¸¸è¿è¡Œ âœ“

æµé‡çªå¢ï¼ˆ500 req/sï¼‰ï¼š
åç«¯å¤„ç†èƒ½åŠ›ï¼š100 req/s
  â†“
é˜Ÿåˆ—å †ç§¯ â†’ å†…å­˜æº…æ»¡ â†’ å´©æºƒ
  â†“
åç«¯å®•æœºï¼Œå³ä½¿å‡å°‘æµé‡ä¹Ÿæ— æ³•æ¢å¤ âœ—

æœ‰é™æµä¿æŠ¤ï¼ˆé™åˆ¶ 150 req/sï¼‰ï¼š
å®¢æˆ·ç«¯å‘é€ 500 req/s
  â†“
Envoy åªå…è®¸ 150 req/s è¿›å…¥
  â†“
å…¶ä½™ 350 req/s è¢«æ‹’ï¼ˆ503 æˆ–æ’é˜Ÿï¼‰
  â†“
åç«¯å¤„ç† 150 req/sï¼Œç¨³å®šè¿è¡Œ âœ“
```

### Istio ä¸­çš„é™æµæœºåˆ¶

Istio çš„é™æµåˆ†ä¸ºä¸¤ä¸ªå±‚é¢ï¼š

**1. è¿æ¥æ± é™æµï¼ˆL4 å±‚ï¼Œç¡¬é™åˆ¶ï¼‰**

```yaml
trafficPolicy:
  connectionPool:
    tcp:
      maxConnections: 100        # æœ€å¤š 100 ä¸ª TCP è¿æ¥
    http:
      http1MaxPendingRequests: 100  # æœ€å¤š 100 ä¸ªå¾…å¤„ç† HTTP è¯·æ±‚
      http2MaxRequests: 100         # HTTP/2 æœ€å¤š 100 ä¸ªå¹¶å‘è¯·æ±‚
```

è¿æ¥æ± æ»¡æ—¶ï¼Œæ–°è¯·æ±‚ç›´æ¥è¢«æ‹’ï¼š

```
å·²æœ‰ 100 ä¸ªå¾…å¤„ç†è¯·æ±‚
   â†“
æ–°è¯·æ±‚åˆ°è¾¾
   â†“
Envoy æ£€æŸ¥ï¼šæœ‰ç©ºä½™ä½ç½®å—ï¼Ÿ
   â”œâ”€ æœ‰ â†’ åŠ å…¥é˜Ÿåˆ—
   â””â”€ æ—  â†’ è¿”å› 503 Upstream Overflow
```

**2. é«˜çº§é™æµï¼ˆL7 å±‚ï¼ŒåŸºäºåº”ç”¨é€»è¾‘ï¼‰**

Istio æä¾› **Telemetry API** è¿›è¡Œé«˜çº§é™æµï¼ˆå¦‚åŸºäºç”¨æˆ·ã€æº IPã€API ç«¯ç‚¹ç­‰ï¼‰ã€‚

### è¿æ¥æ± çš„è¯¦ç»†é…ç½®

```yaml
apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: api-service
spec:
  host: api-service
  trafficPolicy:
    connectionPool:
      tcp:
        # TCP è¿æ¥é™åˆ¶
        maxConnections: 100       # æœ€å¤š 100 ä¸ªå¹¶å‘è¿æ¥
        connectTimeout: 10s       # å»ºç«‹è¿æ¥çš„è¶…æ—¶æ—¶é—´
      http:
        # HTTP è¯·æ±‚é™åˆ¶ï¼ˆå…³é”®ï¼‰
        http1MaxPendingRequests: 100      # HTTP/1.1 é˜Ÿåˆ—å¤§å°
        http2MaxRequests: 100             # HTTP/2 å¹¶å‘è¯·æ±‚æ•°
        http2MaxRequestsPerConnection: 2  # æ¯ä¸ª HTTP/2 è¿æ¥æœ€å¤š 2 ä¸ªè¯·æ±‚
        maxRequestsPerConnection: 2       # HTTP/1.1 keep-alive æœ€å¤š 2 ä¸ªè¯·æ±‚
        idleTimeout: 300s                 # ç©ºé—²è¿æ¥è¶…æ—¶
        h2UpgradePolicy: UPGRADE          # æ˜¯å¦è‡ªåŠ¨å‡çº§åˆ° HTTP/2
```

### é’ˆå¯¹ä¸åŒæœåŠ¡çš„é™æµé…ç½®

**æ•°æ®åº“è¿æ¥ï¼ˆä¸¥æ ¼é™åˆ¶ï¼‰ï¼š**

```yaml
subsets:
- name: database
  labels:
    component: database
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 20        # æ•°æ®åº“è¿æ¥æ˜‚è´µï¼Œä¸¥æ ¼é™åˆ¶
      http:
        http1MaxPendingRequests: 10
    outlierDetection:
      consecutive5xxErrors: 2     # æ›´æ•æ„Ÿ
      baseEjectionTime: 60s
```

**ç¼“å­˜æœåŠ¡ï¼ˆå®½æ¾é™åˆ¶ï¼‰ï¼š**

```yaml
subsets:
- name: cache
  labels:
    component: cache
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 500       # ç¼“å­˜å¯ä»¥å¤„ç†æ›´å¤šè¿æ¥
      http:
        http1MaxPendingRequests: 500
```

---

## 6. å®¹é”™æœºåˆ¶çš„ç»¼åˆåº”ç”¨

### åœºæ™¯ï¼šç”µå•†è®¢å•æœåŠ¡çš„å®¹é”™è®¾è®¡

```yaml
# è®¢å•æœåŠ¡è°ƒç”¨æ”¯ä»˜æœåŠ¡çš„å®Œæ•´å®¹é”™é…ç½®
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: payment
spec:
  hosts:
  - payment
  http:
  - route:
    - destination:
        host: payment
    
    # è¶…æ—¶ï¼šæ”¯ä»˜é€šå¸¸å¿«é€Ÿï¼Œè®¾ç½® 5 ç§’
    timeout: 5s
    
    # é‡è¯•ï¼šæ”¯ä»˜æ“ä½œæ˜¯å¹‚ç­‰çš„ï¼ˆå¯ä»¥æ£€æµ‹é‡å¤ï¼‰ï¼Œå…è®¸é‡è¯•
    retries:
      attempts: 2
      perTryTimeout: 2s           # æ¯æ¬¡ 2 ç§’ï¼Œæ€»å…± 4 ç§’ï¼ˆâ‰¤5ç§’è¶…æ—¶ï¼‰
      retryOn: "5xx,reset,connect-failure"

---
apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: payment
spec:
  host: payment
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 50        # æ”¯ä»˜å¾ˆå…³é”®ï¼Œè¿æ¥æ•°é€‚ä¸­
      http:
        http1MaxPendingRequests: 50
    
    # ç†”æ–­ï¼šæ”¯ä»˜æ•…éšœéœ€è¦å¿«é€Ÿè½¬ç§»
    outlierDetection:
      consecutive5xxErrors: 3     # 3 ä¸ªé”™è¯¯å°±éš”ç¦»
      interval: 10s               # é¢‘ç¹æ£€æŸ¥
      baseEjectionTime: 30s
      maxEjectionPercent: 100     # å¦‚æœæ•…éšœï¼Œå¯ä»¥åˆ‡åˆ°å¤‡ç”¨æ”¯ä»˜
  
  subsets:
  - name: primary
    labels:
      payment-provider: stripe    # ä¸»æ”¯ä»˜
  
  - name: backup
    labels:
      payment-provider: paypal    # å¤‡ç”¨æ”¯ä»˜
```

**å·¥ä½œæµç¨‹ï¼š**

```
è®¢å•æœåŠ¡å‘é€æ”¯ä»˜è¯·æ±‚
   â†“
è¶…æ—¶è®¾ç½®ï¼š5 ç§’ï¼Œé‡è¯• 2 æ¬¡
   â†“
è¿æ¥ Stripeï¼ˆä¸»æ”¯ä»˜ï¼‰
   â†“
è‹¥ 2 ç§’å†…è¿”å›æˆåŠŸ â†’ è®¢å•å®Œæˆ âœ“
è‹¥ 2 ç§’å†…è¿”å› 500 â†’ ç¬¬ 1 æ¬¡é‡è¯•
è‹¥é‡è¯•ä¹Ÿå¤±è´¥ â†’ ç¬¬ 2 æ¬¡é‡è¯•
è‹¥æ‰€æœ‰å°è¯•å¤±è´¥ï¼ˆç´¯ç§¯ 3 ä¸ª 5xxï¼‰â†’ Stripe ç†”æ–­ï¼Œæ”¹ç”¨ PayPal
   â†“
Envoy åˆ‡æ¢åˆ° PayPal backupï¼Œç»§ç»­é‡è¯•
   â†“
å¦‚æœ PayPal æˆåŠŸ â†’ è®¢å•å®Œæˆ âœ“
å¦‚æœ PayPal ä¹Ÿå¤±è´¥ â†’ è¿”å› 503ï¼Œè®¢å•ç³»ç»Ÿé‡è¯•æ•´ä¸ªæµç¨‹
```

### å®¹é”™é“¾æ¡çš„å®Œæ•´é…ç½®æ¸…å•

```yaml
# ========== å‘èµ·æ–¹ï¼ˆè®¢å•æœåŠ¡ï¼‰==========
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: order-service
spec:
  hosts:
  - order-service
  http:
  - route:
    - destination:
        host: payment              # è°ƒç”¨æ”¯ä»˜æœåŠ¡
    timeout: 10s                   # æ¯”ä¸Šæ¸¸ï¼ˆAPI Gatewayï¼‰çŸ­
    retries:
      attempts: 2
      perTryTimeout: 4s

---
# ========== æ¥æ”¶æ–¹ï¼ˆæ”¯ä»˜æœåŠ¡ï¼‰==========
apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: payment
spec:
  host: payment
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 100
      http:
        http1MaxPendingRequests: 100
    outlierDetection:
      consecutive5xxErrors: 5
      interval: 30s
      baseEjectionTime: 30s
      maxEjectionPercent: 50
```

---

## 7. å¸¸è§çš„å®¹é”™é™·é˜±

### é™·é˜± 1ï¼šè¶…æ—¶è®¾ç½®ä¸åˆç†

```yaml
# âŒ é”™è¯¯ï¼šè¶…æ—¶å¤ªçŸ­
timeout: 1s        # æ­£å¸¸æ“ä½œéœ€è¦ 5sï¼Œå…¨éƒ¨è¶…æ—¶

# âœ“ æ­£ç¡®ï¼šæ ¹æ®æ“ä½œç±»å‹è®¾ç½®
timeout: 10s       # API æŸ¥è¯¢è¶³å¤Ÿ
```

### é™·é˜± 2ï¼šé‡è¯•å¯¼è‡´æ”¾å¤§æ•…éšœ

```yaml
# âŒ é”™è¯¯ï¼šéå¹‚ç­‰æ“ä½œé‡è¯•
http:
- match:
  - method:
      exact: POST
  route:
  - destination:
      host: order-service
  retries:
    attempts: 5    # 5 ä¸ªè®¢å•ï¼

# âœ“ æ­£ç¡®ï¼šä»…é‡è¯•å¯å¹‚ç­‰çš„æ“ä½œ
http:
- match:
  - method:
      exact: GET
  route:
  - destination:
      host: order-service
  retries:
    attempts: 3    # å®‰å…¨
```

### é™·é˜± 3ï¼šç†”æ–­é˜ˆå€¼è¿‡é«˜ï¼Œæ— æ³•åŠæ—¶éš”ç¦»æ•…éšœ

```yaml
# âŒ é”™è¯¯ï¼šå®¹é”™å¤ªå®½æ¾
outlierDetection:
  consecutive5xxErrors: 100    # éœ€è¦ 100 ä¸ªé”™è¯¯æ‰éš”ç¦»
  baseEjectionTime: 5s         # 5 ç§’åç«‹å³é‡è¯•ï¼Œå¯èƒ½ç»§ç»­å¤±è´¥

# âœ“ æ­£ç¡®ï¼šå¹³è¡¡å®¹é”™ä¸éš”ç¦»é€Ÿåº¦
outlierDetection:
  consecutive5xxErrors: 5      # 5 ä¸ªé”™è¯¯éš”ç¦»
  baseEjectionTime: 30s        # ç»™è¶³å¤Ÿæ—¶é—´æ¢å¤
```

### é™·é˜± 4ï¼šè¿æ¥æ± è®¾ç½®ä¸å½“

```yaml
# âŒ é”™è¯¯ï¼šè¿æ¥æ± å¤ªå°ï¼Œé™æµä¸è¶³
connectionPool:
  http:
    http1MaxPendingRequests: 5  # ä»»ä½•çªå¢æµé‡éƒ½è¢«æ‹’

# âŒ é”™è¯¯ï¼šè¿æ¥æ± å¤ªå¤§ï¼Œæ— æ³•ä¿æŠ¤åç«¯
connectionPool:
  http:
    http1MaxPendingRequests: 10000  # åç«¯è¢«æ·¹æ²¡

# âœ“ æ­£ç¡®ï¼šæ ¹æ®åç«¯å¤„ç†èƒ½åŠ›è®¾ç½®
connectionPool:
  http:
    http1MaxPendingRequests: 100   # å¹³è¡¡å®¹é‡å’Œä¿æŠ¤
```

---

## 8. æœ¬ç« å°ç»“

### å®¹é”™çš„å››å¤§æ”¯æŸ±å›é¡¾

| æœºåˆ¶ | è§¦å‘æ¡ä»¶ | ä½œç”¨ | é…ç½®ä½ç½® |
|------|---------|------|---------|
| **Timeout** | è¯·æ±‚è¶…è¿‡ Ns | å¿«é€Ÿæ£€æµ‹æ•…éšœ | VirtualService |
| **Retry** | å¤±è´¥å“åº” | å…‹æœç¬æ—¶æ•…éšœ | VirtualService |
| **Circuit Breaker** | è¿ç»­é”™è¯¯ | é˜²æ­¢æ•…éšœæ‰©æ•£ | DestinationRule |
| **Rate Limit** | è¯·æ±‚é˜Ÿåˆ—æ»¡ | ä¿æŠ¤åç«¯ | DestinationRule |

### å¿«é€Ÿå‚è€ƒï¼šæ ‡å‡†å®¹é”™é…ç½®

```yaml
# VirtualServiceï¼ˆè·¯ç”±å±‚å®¹é”™ï¼‰
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: service
spec:
  hosts:
  - service
  http:
  - route:
    - destination:
        host: service
    timeout: 10s
    retries:
      attempts: 3
      perTryTimeout: 2s
      retryOn: "5xx,reset,connect-failure"

---
# DestinationRuleï¼ˆè¿æ¥å±‚å®¹é”™ï¼‰
apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: service
spec:
  host: service
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 100
      http:
        http1MaxPendingRequests: 100
    outlierDetection:
      consecutive5xxErrors: 5
      interval: 30s
      baseEjectionTime: 30s
      maxEjectionPercent: 50
```

### éªŒè¯å®¹é”™é…ç½®

```bash
# æŸ¥çœ‹è·¯ç”±é…ç½®ï¼ˆåŒ…æ‹¬è¶…æ—¶å’Œé‡è¯•ï¼‰
istioctl proxy-config routes -n <namespace> <pod-name>

# æŸ¥çœ‹è¿æ¥æ± é…ç½®
istioctl proxy-config cluster -n <namespace> <pod-name>

# æŸ¥çœ‹ Endpoint å¥åº·çŠ¶æ€ï¼ˆå“ªäº›è¢«ç†”æ–­äº†ï¼‰
istioctl proxy-config endpoints -n <namespace> <pod-name>

# æŸ¥çœ‹ Envoy ç»Ÿè®¡ä¿¡æ¯ï¼ˆè¶…æ—¶ã€é‡è¯•ã€ç†”æ–­è®¡æ•°ï¼‰
kubectl port-forward -n <namespace> <pod-name> 15000:15000
curl http://localhost:15000/stats | grep -E "upstream|retry|timeout"
```

---

## 9. ä¸‹ä¸€æ­¥

ç¬¬äº”ç« å°†æ·±å…¥è®²è§£ï¼š
- **æ•…éšœæ³¨å…¥**ï¼šå¦‚ä½•å®‰å…¨åœ°æµ‹è¯•ä½ çš„å®¹é”™æœºåˆ¶
- **æµé‡é•œåƒ**ï¼šå½±å­æµé‡æµ‹è¯•çš„æŠ€æœ¯
- **è°ƒè¯•ä¸è§‚æµ‹**ï¼šå¦‚ä½•å¿«é€Ÿè¯Šæ–­å®¹é”™é—®é¢˜

æŒæ¡è¿™äº›ï¼Œä½ å°±èƒ½åƒè®¾è®¡é£æœºä¸€æ ·è®¾è®¡å¾®æœåŠ¡ç³»ç»Ÿï¼šæ¯ä¸€ä¸ªæ•…éšœåœºæ™¯éƒ½ç»è¿‡å……åˆ†æµ‹è¯•ã€‚ ğŸš€
